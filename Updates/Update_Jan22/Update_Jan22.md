# Update Jan22

Hi Everyone,

We are pleased to bring to you many enhanced features and functionalities to our products, based on UX feedbacks we have recieved over the past few months. The update in this period, includes - among others - the following key features that were also an extension to the previous update of Nov21.

- ability to enforce construction dimensions on canal sections and drops,
- ability to generate drawing by using different color templates, and
- and improved design capability for automatic design of canal routes.

## Download files:

To update your software to the recent version, down load these resources and follow the usual procedure.

*Note: The download links will take you to a goole drive link. Go to the top right of the page, and choose download to get the files.*

[Download iCAD 2.2.8.7515](https://drive.google.com/file/d/1t8iI7plaJql4Jq2RpYrl_l6qEZW_W5Rt/view?usp=sharing)

[Download iCAD bridge 4.4.2](https://drive.google.com/file/d/12XkeziKqElVQOz8NLDLhB0ogHpi247mp/view?usp=sharing)

[Donaload CanalNetwork 1.5.2.1250](https://drive.google.com/file/d/1sVR5lGiLOB0cQXD9QE2mqofvLbZsz7Uo/view?usp=sharing)
NB: CanalNETWORK is updated for few fixes on 25th Jan. Please see notes below. Please make sure to use the latest version in your work(s).



## iCAD Product:

The iCAD product is modified for the following features:

* Improved Canal Schedule plotting algorithm to identify OGL (xOfst=0.0) line plots and render the appropriate color in the color template of choice.
  
  *Note: This functionality is available for drawing tasks invoked from with in CanalNETWORK. iCAD modules have yet to be improved to make use of the color template introduced in this version.*

* Improved zoom in/out speed, eidting internal functions and integrating to deployed versions. Scroll zoom operation has now a factor of 2.0 on zoom in, and a factor of 0.5 on zoom out; compared to ~1.1 and ~0.9 respectively.

* A major improvement is made to the plan view generating algorithm of CanalStructures module, to allow scaling and rotating plan view drawings to best fit a selected drawing window.
  
  ![f](Images/Image%207.png)
  
  *Screenshot of plan view generated with option of a drawing window.*

## Canal Network

### User Interaction

- Progress bar introduced for data opening operation, helpful while dealing with large size files.

![fd](Images/Image%206.png)

- Short cut to frequent tasks including:
  
  - Ctrl + D for AutoDesign function (`Workflow > Design and Analysis > AutoDesign`), 
  
  - Ctrl + E for Direct access of Design criteria for selected route (`Workspace > Manage Design Criteria > Set/Edit Design Criteria`), and 
  
  - Ctrl + 1, Ctrl + 2 and Ctrl _ 3 for display of anootation information for Drop Heights, FSL-OGL, and LSEC detail information

- Included use of Left and Right arrow keys to navigate between successive nodes in profile view axis.

### Functions

- A new prefernce setting is introduced, where a user can force construction dimensions in the design of canal sections and drop heights. A value >=0.05 causes:
  
  - bottom width of all canal sections designed will be rounded to the provided value
  
  - bottom width of all canal sections designed will have a minimum of 0.30m width
  
  - Drop heights provided will be rounded to construction dimensions, per prefered increment heights specified in CBL_designSettings parameter set. 

- Maximum unsupervised drop generation increased to 50, and a dialog informs the user how many drops are expected, saving time for unwanted operations.

- Lsec details can now be generated by the user using Ctrl + 3 or Explore Solutions > Annotators > LSec Details

- The LSec details information is improved to indicate Curvature radius and, if applicable canal bed eccentricity information, along with other information.
  
  Note: Flowsec information is removed on LSEC detail information to reduce redundancy in generated data.

- Batch LSec drawing generation is developed and integrated. Accesible from `Explore Solutions > Batch Process > LSec Plot to AutoCAD`, this function allows generation of LSec drawings to AutoCAD for mulitple canals in a single process, allowing creation of uniformly scaled and annotated drawings.
  
  *Note: The algorithm sorts the selected canals according to generated Tag information, and created drawings in ascending order.*
  
  *Note: The tool is best suited for generation of LSec drawings for canals of similar levels or generation. Otherwise, the vertical scalling may not work out to common presentation standards.*

- AutoDesign function is improved significantly for the following:
  
  - Consider FSL between succesive segments, and automatically apply correction when necessary.
  
  - AutoCorrect provided drop heights to construction dimensions, using the parameters specified in the design criteria. (Note variable drop height inputs are expected for this operation to work succesfully.)
  
  - The tool can now work on either (a) a single segment, if the control downstream of the segment is selected, (b) on all segments of a single route, if a route is selected on plan view, or (c) on a number of routes at a time, if multiple canal routes are selected in the plan view axis.
    
    *Note: To reset the design to tentative designs generated originally, use Resize, and Refresh while the route is selected.*

- Improved overall design capability - better consideration of ground slope variation.
  
  ![d](Images/Image%20002.png)
  
  *Screenshot for AutoDesign for a sample canal route, using earlier version of the algorithm*
  
  ![f](Images/Image%20001.png)
  
  *Screenshot for design of same canal, with improved algorithm, showing better CBL design closer to to the OGL and with standard size drops that results in better FSL-OGL in downstream controls.*
* Now improved to consider Qmin specification in design criteria, instead of using the calculated capacity for each canal segment. This used to generate and position impractical flow sections where calculated capacities are less than specified Qmin values.

### Productions

- A major imrpovement is integrated in this version, to allow production of drawings to AutoCAD using color templates. Two templates are available in this version, namelu:
  
  - Default: The default color settings used in CanalNETWORK interface (existing)
  
  - ECDSWC: Color specification of Ethiopian Construction Design and Supervision Works Corporation (as of Jan2022).
    
    *Note: The color templates are prepared and integrated based on templates obtained from the client. However, work continues to get full approval by the drafting team.*

- Drop detail inforamtion generated to AutoCAD is modified to provide appropriate position and height details as shown in below screen shot.
  
  ![fd](Images/Capture.PNG)
  
  *Screenshot of Drop detail text in previous version.*
  
  ![c](Images/Capture2.PNG)
  
  *Screenshot of drop annotatoin text in the current release, showing additional information on Invert levels at inlet and exit of a given drop.*

- Improved algorithm to render end-of-canal controls appropriately, overcoming previous bug that missed these controls in some cases.

### Bug fixes

The following bugs are fixed in this version, providing better overall performance to users.

greater value to users.

- fixed sum error for cummulating farm areas 

- Edited menu item on Canal Editor/Solver from Min Lin to Min Pw

- fixed labeling of branch canals in detail view axis for canal indexs exceeding 9

- fixed subnetwork data creation and view in partly taged networks

- fixed bug while editing nodes, with 'No string accepted' message, expecially after editing canal assembly information.

- fix fit-for-no-drop option which reverted invert levels to -0.5 (out of user control) upon release; adjusted to read and set value from design criteria for the corresponding canal level.

- fixed LSEc generation for canals, that created a schedule of NaN values for range overshot; solved by limiting range specification to acaula available data for the canal route in question.

- AutoDesign now considers Qmin seting in design criteria, for calculated capacitities. 

- corrected minFSL-OGL calaculation algotith for precission

- Apply clipping to detail axis text, limiting text information display only with in the boundaries of the axis.

- Fix unintended multiple selection of controls on profile view axis.
